## 适配迁移总体流程
>**1. 获取到spec文件以及源码文件**

>**2. 在openEuler上进行编译构建**

>**3. 在openEuler上进行兼容性测试**

>**4. 将已经适配好的spec文件以及源码文件存放在src-oepkgs仓库中(建仓流程详见[rpm包构建及建仓流程](https://gitee.com/openeuler/oec-application/blob/master/doc/rpm%E6%9E%84%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%BB%BA%E4%BB%93%E6%B5%81%E7%A8%8B.md))**
### 1. 软件包spec及源码文件获取

**1.1 在一些网站上找到软件包的src.rpm包，解压获取spec文件以及软件包的源码文件：**
```
https://pkgs.org/
https://src.fedoraproject.org/projects/rpms/*
https://koji.fedoraproject.org/koji/packages
www.google.com
www.baidu.com
www.bing.com
```
以libvirt 4.5.0版本引入为例，在网上寻找src.rpm包的流程如下图所示：
![输入图片说明](image.png)
![输入图片说明](image2image.png)
```
rpm -i http://vault.centos.org/7.9.2009/os/Source/SPackages/libvirt-4.5.0-36.el7.src.rpm
```
![输入图片说明](image3image.png)
![输入图片说明](image4image.png)
如上图所示的```~/rpmbuild/SPECS/``` 和 ```~/rpmbuild/SOURCES/```目录下面分别存放了软件包的spec文件以及软件包的源码文件

### 2. 在openEuler上进行编译构建：
执行命令，安装构建工具：
```
yum install -y dnf-plugins-core rpm-build
```
执行命令，安装软件包的依赖包
```
# yum-builddep -y ~/rpmbuild/SPECS/*.spec
yum-builddep -y ~/rpmbuild/SPECS/libvirt.spec
```
执行命令，对软件包进行编译构建
```
# rpmbuild -ba ~/rpmbuild/SPECS/*.spec
rpmbuild -ba ~/rpmbuild/SPECS/libvirt.spec
```
编译构建通过就会在 ~/rpmbuild/RPMS/ 目录下面生成 rpm包
```
ls ~/rpmbuild/RPMS/*
```
### 3. 在openEuler上进行兼容性测试
执行命令，测试软件包的安装、卸载
```
yum localinstall ~/rpmbuild/RPMS/x86_64/*
yum remove *
```
执行命令，测试软件包的服务启停
```
systemctl start *
systemctl stop *
```
### 4. 将已经适配好的软件包的spec文件以及~/rpmbuild/SOURCE目录下面的源码文件存放在src-oepkgs仓库中(建仓流程详见[rpm包构建及建仓流程](https://gitee.com/openeuler/oec-application/blob/master/doc/rpm%E6%9E%84%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%BB%BA%E4%BB%93%E6%B5%81%E7%A8%8B.md))